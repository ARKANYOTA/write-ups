
void main(void)

{
  int iVar1;
  long in_FS_OFFSET;
  int local_1c;
  uint *local_18;
  undefined8 local_10;
  
  local_10 = *(undefined8 *)(in_FS_OFFSET + 0x28);

  setvbuf(stdout,(char *)0x0,2,0);
  local_18 = createCharacter(100,0x32,100);
  /*
    [Alchimiste] : En entrant ici, vous avez fait le premier pas vers l'aventure mystique de l'alchimie, où la recherche de la connaissance et de la sagesse est sans fin.
    [Alchimiste] : Montrez-moi votre force et votre intelligence, et je vous donnerai la clé de la porte de la connaissance.
    [Alchimiste] : N'hésitez pas à faire un tour dans mon modeste laboratoire, je suis sûr que vous trouverez quelque chose qui vous aidera à progresser.
  */
  while( true ) {
    /*
      1: Acheter un élixir de force
      2: Consommer un élixir de force
      3: Parler à l'alchimiste
      4: Montrer mes caractéristiques
      5: Obtenir la clé
      6: Sortir du cabinet d\'alchimie

      >>>
    */

    // local_1c << Input
    iVar1 = __isoc99_scanf(&DAT_0040125d,&local_1c);
    if (iVar1 != 1) {
                    /* WARNING: Subroutine does not return */
      exit(0);
    }
    if (local_1c < 1) goto LAB_00400cb2;
    // Local 1c >= 1
    switch(local_1c) {
    case 0:
      break;
    case 1:
      buyStrUpPotion((long)local_18);
      break;
    case 2:
      useItem((long)local_18);
      break;
    case 3:
      sendMessage();
      break;
    case 4:
      showStats(local_18);
      break;
    case 5:
      view_flag((int *)local_18);
      break;
    case 6:
                    /* WARNING: Subroutine does not return */
      exit(0);
    default:
LAB_00400cb2:
                    /* WARNING: Subroutine does not return */
      exit(0);
    }
  };
}




void buyStrUpPotion(long param_1) {
  undefined8 *param1;
  /*
    ***** Achat d'un élixir de force
  */
  param1 = (undefined8 *)malloc(0x48);
  printf("***** ~ %p\n",param1);

  *param1 = 0x6420726978696c45;
  param1[1] = 0x6563726f662065;
  param1[8] = incStr;
  if (*(int *)(param_1 + 8) < 0x32) {
    // [Alichimiste] Vous avez pas suffisament de pieces d'or
  }
  else {
    *(undefined8 **)(param_1 + 0x10) = param1;
    *(int *)(param_1 + 8) = *(int *)(param_1 + 8) + -0x32;
  }
  return;
}


void useItem(long param_1) {
  if (*(long *)(param_1 + 0x10) == 0) {
    /*[Alchimiste] : Vous n'avez pas d'élixir de force en votre possession.*/
  }
  else {
    /*
      ***** Elixir consommé
      ***** Vous sentez votre force augmenter.
    */

    (**(code **)(*(long *)(param_1 + 0x10) + 0x40))(param_1);
    printf("***** ~ %p\n",*(void **)(param_1 + 0x10));
    
    free(*(void **)(param_1 + 0x10));
  }
  return;
}


void sendMessage(void) {
  void *__buf;
  
  __buf = malloc(0x48);
  printf("\n[Vous] : ");
  read(0,__buf,0x48);
  printf("***** ~ %p\n",__buf);
  return;
}



void showStats(uint *param_1) {
  /*
    Voici une estimation numérique de vos caractéristiques:

    FOR: *param_1
    INT: param_1[1]
    OR: param_1[2]
  */
  printf("\n\tFOR: %d\n\tINT: %d\n\tOR: %d",*param_1,param_1[1],param_1[2]);
  return;
}


void view_flag(int *param_1) {
  FILE *__stream;
  char *pcVar1;
  long in_FS_OFFSET;
  char local_58 [72];
  long local_10;
  
  local_10 = *(long *)(in_FS_OFFSET + 40);

  if ((*param_1 < 150) || (param_1[1] < 150)) {
    /*[Alchimiste] : Vous n'avez pas prouvé votre valeur.*/
  }
  else {
    __stream = fopen("flag.txt","r");
    if (__stream == (FILE *)0x0) {
                    /* WARNING: Subroutine does not return */
      exit(0);
    }
    pcVar1 = fgets(local_58,64,__stream);
    if (pcVar1 != (char *)0x0) {
      // [Alichimiste] voici la conaisaance comme promis
      puts("-----------------------------------------------");
      puts(local_58);
      puts("-----------------------------------------------");
                    /* WARNING: Subroutine does not return */
      exit(0);
    }
  }
  if (local_10 != *(long *)(in_FS_OFFSET + 0x28)) {
                    /* WARNING: Subroutine does not return */
    __stack_chk_fail();
  }
  return;
}




undefined4* createCharacter(undefined4 param_1,undefined4 param_2,undefined4 param_3){
  undefined4 *puVar1;
  
  puVar1 = (undefined4 *)malloc(0x18);
  *puVar1 = param_1;
  puVar1[1] = param_2;
  puVar1[2] = param_3;
  *(undefined8 *)(puVar1 + 4) = 0;
  return puVar1;
}
